# asyncNSTBot
DLS 2020 Autumn project
GAN взят отсюда: [MSG](https://github.com/zhanghang1989/PyTorch-Multi-Style-Transfer)
Основа обычной NST модели: [занятие DLS](https://colab.research.google.com/drive/1-X4Q3LkPBLZrQZuLoBj4uA7xP0Hpj8mU)
Бот написан с использованием асинхронного фреймворка aiogram.

В этом проекте так много разных папок и файлов из-за того, что я хотел показать не только код, но и то, как выглядит директория во время работы бота. Рабочий код находится в основной директории, а также в папке models\

Бот работает на AWS EC2. К сожалению,  использование мной del, gc.collect(), а также создание swap space на сервере не полностью решили проблемы с памятью. Точно можно сказать, что выбор в меню качетва Low гарантирует стабильную работу бота. Во всяком случае, проблем с памятью точно не будет. При выборе б0льшего разрешения выходной картинки уже появляется вероятность того, что сервер прекратит выполнение bot.py и придется его перезапускать. Возможно, я ко времени проверки смогу решить эту проблему, ведь даже с неработающим ботом при входе на сервер выводится сообщение, что ~ 61% памяти уже занят (из ~ 7.69 GB). А это, по-моему как-то странно.
Результаты работы бота на более высоких разрешениях выходной картинки можно посмотреть в папке Results\. Ну или попробовать другие варианты в меню выбора качества, вдруг повезет. Если бот перестал отвечать на команды, можно написать мне на почту: sevlabr@yandex.ru
[ВК](https://vk.com/hfghdjutghfjkksjk)

Опытным путем было выяснено, что GAN на сервере работает почти мгновенно даже с большими картинками и высоким выходным разрешением. Обычный NST работает на Low ~ 5 минут, на Medium ~ 12 минут, на High ~ 30 минут. Кроме того, в случае NST бот переодически должен посылать сообщения о том, что он все еще жив и работает. Ну или можно просто написать /menu и подождать ответа, он же асинхронный.
